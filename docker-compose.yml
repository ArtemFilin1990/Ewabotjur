version: '3.8'

services:
  # Render worker (Telegram processing)
  worker:
    build: .
    container_name: ewabotjur_worker
    restart: unless-stopped
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - DADATA_TOKEN=${DADATA_TOKEN}
      - WORKER_AUTH_TOKEN=${WORKER_AUTH_TOKEN}
      - ALLOWED_CHAT_IDS=${ALLOWED_CHAT_IDS}
      - MEMORY_STORE_PATH=/app/storage/memory_store.json
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - HTTP_TIMEOUT_SECONDS=${HTTP_TIMEOUT_SECONDS:-15}
    volumes:
      - ./storage:/app/storage
      - ./logs:/app/logs
    networks:
      - ewabotjur_network
    ports:
      - "8000:8000"

networks:
  ewabotjur_network:
    driver: bridge
